---
import AnimateText from "../components/AnimateText.astro";
import Card from "../components/Card.astro";
import KeepUpdated from "../sections/KeepUpdated.astro";

import getFiscalSpaceResources from "../pages/api/getFiscalSpaceResources";

const resources = await getFiscalSpaceResources();
---

<section id="fiscal-space-resources" class="bg-white px-6">
  <div class="relative h-[200svh]">
    <div class="sticky top-0 grid h-svh place-content-center justify-items-center text-center">
      <h2
        class="text-6xl font-bold leading-tight tracking-tighter text-[#1672F7] md:text-[135px]"
      >
        <AnimateText
          textList={["The Fiscal Space", "Resources"]}
          mobileTextList={["The Fiscal", "Space", "Resources"]}
        />
      </h2>

      <p class="max-w-[44ch] mt-4">
        Catch up on TAIâ€™s own research and opinion on why fiscal matters and the
        importance of trust, accountability and inclusion in fiscal policy and
        administration.
      </p>
    </div>
  </div>
  <div class="container mx-auto mb-24 flex max-w-7xl flex-col items-center">
    <ul class="grid gap-8 md:grid-cols-3">
      {
        resources?.map(({ link, image, title }) => (
          <Card title={title} href={link} imageUrl={image?.filename} />
        ))
      }
    </ul>
  </div>

  <KeepUpdated />
</section>
